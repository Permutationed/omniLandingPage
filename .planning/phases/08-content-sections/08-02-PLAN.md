---
phase: 08-content-sections
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - components/ui/tabs.tsx
  - components/content-sections/audience-tabs/audience-tabs.tsx
  - components/content-sections/audience-tabs/students-content.tsx
  - components/content-sections/audience-tabs/merchants-content.tsx
  - components/content-sections/audience-tabs/index.ts
autonomous: true

must_haves:
  truths:
    - "User can click between Students/Parents and Partner Merchants tabs"
    - "User sees sliding underline indicator animate between tabs"
    - "User sees content crossfade smoothly when switching tabs"
    - "User can navigate tabs via keyboard (arrow keys, Tab)"
  artifacts:
    - path: "components/ui/tabs.tsx"
      provides: "shadcn Tabs primitive with Radix accessibility"
      exports: ["Tabs", "TabsList", "TabsTrigger", "TabsContent"]
    - path: "components/content-sections/audience-tabs/audience-tabs.tsx"
      provides: "Main audience tabs container with animated indicator"
      exports: ["AudienceTabs"]
    - path: "components/content-sections/audience-tabs/students-content.tsx"
      provides: "Students & Parents tab content"
      exports: ["StudentsContent"]
    - path: "components/content-sections/audience-tabs/merchants-content.tsx"
      provides: "Partner Merchants tab content"
      exports: ["MerchantsContent"]
  key_links:
    - from: "components/content-sections/audience-tabs/audience-tabs.tsx"
      to: "components/ui/tabs.tsx"
      via: "Tabs component import"
      pattern: "import.*Tabs.*from.*@/components/ui/tabs"
    - from: "components/content-sections/audience-tabs/audience-tabs.tsx"
      to: "motion/react"
      via: "layoutId for animated underline"
      pattern: "layoutId.*tab-underline"
---

<objective>
Create the Audience Tabs section with animated tab indicator and crossfade content transitions.

Purpose: Allow users to explore benefits from two perspectives - Students/Parents (earning rewards) and Partner Merchants (customer acquisition).

Output: AudienceTabs component with accessible tabs, animated sliding underline, and smooth content transitions.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-content-sections/08-RESEARCH.md

# Animation patterns
@lib/animation-variants.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install shadcn Tabs and create animated tab components</name>
  <files>
    components/ui/tabs.tsx
    components/content-sections/audience-tabs/audience-tabs.tsx
  </files>
  <action>
1. Install shadcn Tabs component:
```bash
npx shadcn@latest add tabs --yes
```

2. Create `components/content-sections/audience-tabs/audience-tabs.tsx`:

'use client' directive

Import:
- useState from 'react'
- motion, AnimatePresence from 'motion/react'
- Tabs, TabsList, TabsTrigger, TabsContent from '@/components/ui/tabs'
- ScrollReveal from '@/components/ui/scroll-reveal'
- StudentsContent and MerchantsContent (will create next)

Define tabs:
```typescript
const tabs = [
  { id: 'students', label: 'Students & Parents' },
  { id: 'merchants', label: 'Partner Merchants' },
] as const
```

AudienceTabs component:
- State: activeTab with useState(tabs[0].id)
- Wrap in section element, no id needed (not a nav target)
- Container: max-w-6xl mx-auto px-4 py-20 sm:py-24

Section header (ScrollReveal):
- h2: font-display text-3xl sm:text-4xl font-bold text-center mb-4 "Who Benefits?"
- p: text-muted-foreground text-lg text-center max-w-2xl mx-auto mb-12

Tabs component (controlled):
- value={activeTab}
- onValueChange={(v) => setActiveTab(v as typeof tabs[number]['id'])}
- className="flex flex-col items-center"

TabsList:
- className="relative bg-muted/50 p-1 rounded-lg"

TabsTrigger (map over tabs):
- key={tab.id}
- value={tab.id}
- className="relative px-6 py-2.5 text-sm font-medium transition-colors data-[state=active]:text-foreground data-[state=inactive]:text-muted-foreground z-10"
- Inside each trigger, conditionally render the animated underline:
```tsx
{activeTab === tab.id && (
  <motion.div
    layoutId="audience-tab-indicator"
    className="absolute inset-0 bg-background rounded-md shadow-sm"
    style={{ zIndex: -1 }}
    transition={{ type: 'spring', bounce: 0.2, duration: 0.6 }}
  />
)}
```

Content area with AnimatePresence:
- className="w-full mt-8"
- AnimatePresence mode="wait"
- motion.div with key={activeTab}:
  - initial={{ opacity: 0, y: 10 }}
  - animate={{ opacity: 1, y: 0 }}
  - exit={{ opacity: 0, y: -10 }}
  - transition={{ duration: 0.2, ease: 'easeInOut' }}
- Conditional content: activeTab === 'students' ? StudentsContent : MerchantsContent

Note: Using controlled Tabs + AnimatePresence gives us crossfade. The layoutId on indicator gives us sliding underline without manual position calculation.
  </action>
  <verify>
    - shadcn tabs installed: `ls components/ui/tabs.tsx`
    - TypeScript compiles: `npx tsc --noEmit`
    - layoutId present: `grep -l "layoutId" components/content-sections/audience-tabs/audience-tabs.tsx`
    - AnimatePresence present: `grep -l "AnimatePresence" components/content-sections/audience-tabs/audience-tabs.tsx`
  </verify>
  <done>
    - shadcn Tabs installed with Radix accessibility
    - AudienceTabs has animated indicator using layoutId
    - Content crossfades using AnimatePresence mode="wait"
    - Keyboard navigation works via Radix Tabs (arrow keys, Tab)
  </done>
</task>

<task type="auto">
  <name>Task 2: Create tab content components</name>
  <files>
    components/content-sections/audience-tabs/students-content.tsx
    components/content-sections/audience-tabs/merchants-content.tsx
    components/content-sections/audience-tabs/index.ts
  </files>
  <action>
1. Create `components/content-sections/audience-tabs/students-content.tsx`:

'use client' directive

Import lucide icons: GraduationCap, Wallet, MapPin, Bell, TrendingUp

StudentsContent component:
- Grid layout: grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6

5 benefit cards (from AUD-02 requirements):
```typescript
const benefits = [
  {
    icon: Wallet,
    title: 'Rewards on Tuition',
    description: 'Earn up to 1% cash back on every tuition payment. No caps, no gimmicks.',
  },
  {
    icon: TrendingUp,
    title: 'Better Loan Rates',
    description: 'Unlock lower interest rates as you build payment history with Omni.',
  },
  {
    icon: MapPin,
    title: '3x-10x Merchant Points',
    description: 'Discover local businesses near campus offering boosted reward multipliers.',
  },
  {
    icon: GraduationCap,
    title: 'Campus Discovery',
    description: 'Find the best student deals and rewards at businesses around your school.',
  },
  {
    icon: Bell,
    title: 'Proximity Notifications',
    description: 'Get alerts when you\'re near a partner merchant with elevated rewards.',
  },
]
```

Each card:
- div with bg-card rounded-xl p-6 border border-border/50
- Icon wrapper: w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center mb-4
- Icon: size-5 text-primary
- h3: font-semibold mb-2
- p: text-muted-foreground text-sm

2. Create `components/content-sections/audience-tabs/merchants-content.tsx`:

'use client' directive

Import lucide icons: Users, Eye, MapPinned, TrendingUp, BadgePercent

MerchantsContent component (from AUD-03 requirements):
```typescript
const benefits = [
  {
    icon: Users,
    title: 'Student Customer Acquisition',
    description: 'Connect with thousands of students actively seeking local deals and rewards.',
  },
  {
    icon: Eye,
    title: 'Visibility Through Omni App',
    description: 'Your business appears on campus maps and discovery feeds in the Omni app.',
  },
  {
    icon: MapPinned,
    title: 'Location-Based Reach',
    description: 'Target students when they\'re nearby with proximity-based notifications.',
  },
  {
    icon: TrendingUp,
    title: 'Drive Foot Traffic',
    description: 'Convert app users into in-store customers with compelling reward offers.',
  },
  {
    icon: BadgePercent,
    title: 'Flexible Reward Tiers',
    description: 'Set your own multipliers (3x-10x) to match your marketing goals and budget.',
  },
]
```

Same card structure as StudentsContent for visual consistency.

3. Create `components/content-sections/audience-tabs/index.ts`:
```typescript
export { AudienceTabs } from './audience-tabs'
export { StudentsContent } from './students-content'
export { MerchantsContent } from './merchants-content'
```
  </action>
  <verify>
    - TypeScript compiles: `npx tsc --noEmit`
    - Files exist: `ls components/content-sections/audience-tabs/*.tsx`
    - 5 benefits each: `grep -c "title:" components/content-sections/audience-tabs/students-content.tsx` returns 5
    - Index exports: `grep -l "AudienceTabs" components/content-sections/audience-tabs/index.ts`
  </verify>
  <done>
    - StudentsContent shows 5 benefit cards (tuition rewards, rates, merchant points, discovery, notifications)
    - MerchantsContent shows 5 benefit cards (acquisition, visibility, location-based, traffic, tiers)
    - Consistent card styling across both content panels
    - Exports ready for page integration
  </done>
</task>

</tasks>

<verification>
1. TypeScript compiles without errors: `npx tsc --noEmit`
2. shadcn Tabs installed correctly (Radix primitives)
3. Animated underline uses layoutId (no getBoundingClientRect)
4. Content uses AnimatePresence mode="wait" for crossfade
5. Keyboard navigation works (arrow keys between tabs, Tab to content)
6. Tab trigger has correct ARIA: role="tab", aria-selected
</verification>

<success_criteria>
- Two tabs render: "Students & Parents" and "Partner Merchants"
- Clicking tab switches content with crossfade animation
- Underline indicator slides smoothly between tabs
- Arrow keys navigate between tab triggers
- Tab content is semantically correct (panels, roles)
- Component exports ready for page integration
</success_criteria>

<output>
After completion, create `.planning/phases/08-content-sections/08-02-SUMMARY.md`
</output>
